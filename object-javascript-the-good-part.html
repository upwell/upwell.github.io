<!DOCTYPE html>
<html>
    <head>
        <title>Object - javascript: the good part - Note Everything</title>
        <meta charset="utf-8" />
        <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" />
        <link href="http://hehan.net/theme/static/css/style.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    </head>

    <body id="index" class="archive">
        <div class="container">
            <div class="header">
                <ul class="nav nav-pills pull-right">
                    <li class=""><a href="http://hehan.net">Home</a></li>
                    <li><a href="http://hehan.net/archives.html">Archives</a></li>
                </ul>
                <h3 class="text-muted"><a href="http://hehan.net">Note Everything</a></h3>
				<h2 class="text-muted"></h2>
             </div>
<section id="content" class="article content">
  <header>
    <h2 class="entry-title">
      <a href="http://hehan.net/object-javascript-the-good-part.html" rel="bookmark"
         title="Permalink to Object - javascript: the good part">Object - javascript: the good part</a></h2>
 
  </header>
  
     
  <div class="entry-content">
    <h3>Object Literals</h3>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">empty_object</span> <span class="o">=</span> <span class="p">{};</span>

<span class="kd">var</span> <span class="nx">stooge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;first-name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jerome&quot;</span><span class="p">,</span>
    <span class="s2">&quot;last-name&quot;</span><span class="o">:</span> <span class="s2">&quot;Howard&quot;</span>
<span class="p">};</span>
</pre></div>


<h4>Property Name</h4>
<ul>
<li>could be <strong>any</strong> string including empty string;</li>
<li><strong>the quote around the name is optional</strong>, if the name is a legal Javascript<br />
  name (not a reserved word);</li>
</ul>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">flight</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">airline</span><span class="o">:</span> <span class="s2">&quot;Ocreanic&quot;</span><span class="p">,</span>
    <span class="nx">number</span><span class="o">:</span> <span class="mi">815</span><span class="p">,</span>
    <span class="nx">departure</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">IATA</span><span class="o">:</span> <span class="s2">&quot;SYD&quot;</span><span class="p">,</span>
        <span class="nx">time</span><span class="o">:</span> <span class="s2">&quot;2012-10-12 12:11&quot;</span><span class="p">,</span>
        <span class="nx">city</span><span class="o">:</span> <span class="s2">&quot;Sydney&quot;</span>
    <span class="p">},</span>
    <span class="nx">arrival</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">IATA</span><span class="o">:</span> <span class="s2">&quot;LAX&quot;</span><span class="p">,</span>
        <span class="nx">time</span><span class="o">:</span> <span class="s2">&quot;2012-10-13 12:10&quot;</span><span class="p">,</span>
        <span class="nx">city</span><span class="o">:</span> <span class="s2">&quot;Los Angeles&quot;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>


<h3>Retrieval</h3>
<ul>
<li>Wrapping a string expression in a [] suffix;</li>
<li>If the name is a legal Javascript name and not a reserved word,  then the <code>.</code><br />
  notation can be used instead;</li>
<li>The <code>.</code> notation is preferred beacuase it's more compact and it reads better;</li>
<li>The <code>undefined</code> value is produced if an attempt is made to retrieve a nonexistent<br />
  member:</li>
<li>Attempting to retrieve values from undefined will throw a TypeError exception;</li>
</ul>
<div class="highlight"><pre><span class="nx">stoog</span><span class="p">[</span><span class="s2">&quot;first-name&quot;</span><span class="p">]</span>         <span class="c1">// &quot;Jerome&quot;</span>
<span class="nx">flight</span><span class="p">.</span><span class="nx">departure</span><span class="p">.</span><span class="nx">city</span>       <span class="c1">// &quot;Sydney&quot;</span>

<span class="nx">flight</span><span class="p">.</span><span class="nx">status</span>               <span class="c1">// undefined</span>

<span class="nx">flight</span><span class="p">.</span><span class="nx">equipment</span><span class="p">.</span><span class="nx">model</span>      <span class="c1">// throw &quot;TypeError&quot;</span>
<span class="nx">flight</span><span class="p">.</span><span class="nx">equipment</span> <span class="o">&amp;&amp;</span> <span class="nx">flight</span><span class="p">.</span><span class="nx">equipment</span><span class="p">.</span><span class="nx">model</span> <span class="c1">// undefined</span>
</pre></div>


<h3>Update</h3>
<div class="highlight"><pre><span class="nx">stoog</span><span class="p">[</span><span class="s2">&quot;first-name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Jack&quot;</span><span class="p">;</span><span class="c1">// if the property name already exist, update the value;</span>

<span class="nx">stoog</span><span class="p">.</span><span class="nx">sex</span> <span class="o">=</span> <span class="s2">&quot;Male&quot;</span><span class="p">;</span>          <span class="c1">// if the property name not exist, the object is augmented;</span>
</pre></div>


<h3>Reference</h3>
<p>Object is passed <strong>BY REFERENCE</strong>, never by copied.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="c1">// refer to different empty objects</span>

<span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="c1">// refer to the same empty object</span>
</pre></div>


<h3>Prototype</h3>
<p>Every object is linked to a <strong>prototype object</strong>. All objects created from object literal <code>{}</code><br />
are linked to <code>Object.prototype</code>.</p>
<p>The prototype link has no effect on updating. When we make changes to an object, the object's<br />
prototype is not touched.</p>
<p>The prototype relationship is a dynamic relationship. If we add a new property to a prototype,<br />
that property will immediately be visible in all the objects that are based on that prototype.</p>
<div class="highlight"><pre><span class="nx">stooge</span><span class="p">.</span><span class="nx">profession</span> <span class="o">=</span> <span class="s1">&#39;actor&#39;</span><span class="p">;</span>
<span class="nx">another_stooge</span><span class="p">.</span><span class="nx">profession</span> <span class="c1">// &#39;actor&#39;</span>
</pre></div>


<h3>Reflection</h3>
<p>Check if the object has a property:</p>
<p>Use <code>typeof</code> operator.</p>
<div class="highlight"><pre><span class="k">typeof</span> <span class="nx">flight</span><span class="p">.</span><span class="nx">number</span>        <span class="c1">// &#39;number&#39;</span>
<span class="k">typeof</span> <span class="nx">flight</span><span class="p">.</span><span class="nx">status</span>        <span class="c1">// &#39;string&#39;</span>
<span class="k">typeof</span> <span class="nx">flight</span><span class="p">.</span><span class="nx">manifest</span>      <span class="c1">// &#39;undefined&#39;</span>
</pre></div>


<p>Any property on the prototype chain can produce a value:</p>
<div class="highlight"><pre><span class="k">typeof</span> <span class="nx">flight</span><span class="p">.</span><span class="nx">toString</span>      <span class="c1">// &#39;function&#39;</span>
</pre></div>


<p>Use <code>hasOwnProperty</code> method. This method does <strong>NOT</strong> check the prototype chain.</p>
<div class="highlight"><pre><span class="nx">flight</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">)</span>     <span class="c1">// true</span>
<span class="nx">flight</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s1">&#39;toString&#39;</span><span class="p">)</span>   <span class="c1">// false</span>
</pre></div>


<h3>Enumeration</h3>
<p>Loop over all the property names in an object.</p>
<p><code>for in</code> statement. The enumeration will include all of the properties (functions and<br />
properties in the prototype chain.)</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">another_stooge</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">another_stooge</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;function) {</span>
<span class="s1">        document.writeln(name + &#39;</span><span class="o">:</span> <span class="err">&#39;</span> <span class="o">+</span> <span class="nx">another_stooge</span><span class="p">[</span><span class="nx">name</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>But there is <strong>NO</strong> gurantee on the order of the names.</p>
<p>The better way is to created a property array and loop the array with the right order.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;first-name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;last-name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;profession&#39;</span>
<span class="p">];</span>

<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">properties</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">properties</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span>
        <span class="nx">another_stooge</span><span class="p">[</span><span class="nx">properties</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<h3>Delete</h3>
<p>The <code>delete</code> operator can be used to remove a property from a object. It does <strong>NOT</strong> touch<br />
any object in the prototype linkage.</p>
  </div><!-- /.entry-content -->
   <footer class="post-info text-muted">
    Posted on <abbr class="published" title="2013-11-10T10:42:00+08:00">
      日 10 十一月 2013
    </abbr>
    <address class="vcard author">
      by <a class="url fn" href="http://hehan.net/author/han.html">Han</a>
    </address> in <a href="http://hehan.net/category/tech.html">tech</a> Tagged <a href="http://hehan.net/tag/javascript.html">javascript </a>  </footer><!-- /.post-info -->
</section>
            <footer id="contentinfo" class="footer">
                    <nav class="pull-right bottom-nav">
                        <a href="http://hehan.net/None">RSS</a>
                    </nav>
                    <address id="about" class="vcard body">
                    &copy; <a href="http://hehan.net">Note Everything</a> Proudly powered by <a href="http://getpelican.com/">Pelican</a>
                    </address><!-- /#about -->
            </footer><!-- /#contentinfo -->
        </div><!-- container -->
    </body>
</html>